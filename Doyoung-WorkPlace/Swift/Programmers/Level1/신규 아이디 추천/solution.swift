//
//  RecommandNewId.swift
//  AlgorithmNote
//
//  Created by ido on 2021/07/03.
//

import Foundation

//1. new_idì˜ ëª¨ë“  ëŒ€ë¬¸ìë¥¼ ëŒ€ì‘ë˜ëŠ” ì†Œë¬¸ìë¡œ ì¹˜í™˜í•©ë‹ˆë‹¤.[O]
//2. new_idì—ì„œ ì•ŒíŒŒë²³ ì†Œë¬¸ì, ìˆ«ì, ë¹¼ê¸°(-), ë°‘ì¤„(_), ë§ˆì¹¨í‘œ(.)ë¥¼ ì œì™¸í•œ ëª¨ë“  ë¬¸ìë¥¼ ì œê±°í•©ë‹ˆë‹¤.
//3. new_idì—ì„œ ë§ˆì¹¨í‘œ(.)ê°€ 2ë²ˆ ì´ìƒ ì—°ì†ëœ ë¶€ë¶„ì„ í•˜ë‚˜ì˜ ë§ˆì¹¨í‘œ(.)ë¡œ ì¹˜í™˜í•©ë‹ˆë‹¤.
//4. new_idì—ì„œ ë§ˆì¹¨í‘œ(.)ê°€ ì²˜ìŒì´ë‚˜ ëì— ìœ„ì¹˜í•œë‹¤ë©´ ì œê±°í•©ë‹ˆë‹¤.[O]
//5. new_idê°€ ë¹ˆ ë¬¸ìì—´ì´ë¼ë©´, new_idì— "a"ë¥¼ ëŒ€ì…í•©ë‹ˆë‹¤.
//6. new_idì˜ ê¸¸ì´ê°€ 16ì ì´ìƒì´ë©´, new_idì˜ ì²« 15ê°œì˜ ë¬¸ìë¥¼ ì œì™¸í•œ ë‚˜ë¨¸ì§€ ë¬¸ìë“¤ì„ ëª¨ë‘ ì œê±°í•©ë‹ˆë‹¤.
//     ë§Œì•½ ì œê±° í›„ ë§ˆì¹¨í‘œ(.)ê°€ new_idì˜ ëì— ìœ„ì¹˜í•œë‹¤ë©´ ëì— ìœ„ì¹˜í•œ ë§ˆì¹¨í‘œ(.) ë¬¸ìë¥¼ ì œê±°í•©ë‹ˆë‹¤.
//7. new_idì˜ ê¸¸ì´ê°€ 2ì ì´í•˜ë¼ë©´, new_idì˜ ë§ˆì§€ë§‰ ë¬¸ìë¥¼ new_idì˜ ê¸¸ì´ê°€ 3ì´ ë  ë•Œê¹Œì§€ ë°˜ë³µí•´ì„œ ëì— ë¶™ì…ë‹ˆë‹¤.

func solution(_ new_id:String) -> String {
    
    var userId = new_id.lowercased() // 1ë‹¨ê³„
    
    for character in userId {
        switch character {
        case "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "1", "2", "3", "4", "5", "6", "7", "8", "9", "0","-", "_", "."://ğŸ˜…ğŸ˜…
            break
        default:
            userId = userId.replacingOccurrences(of: String(character), with: "")// Stringê°’ì—ì„œ of ê°’ì„ with ê°’ìœ¼ë¡œ ì „í™˜
        }
    }

    
    while userId.contains("..") {
        userId = userId.replacingOccurrences(of: "..", with: ".")// of ê°’ì„ with ê°’ìœ¼ë¡œ ì „í™˜
    } // 3ë‹¨ê³„
    while userId.last == "." || userId.first == "." {
        userId = userId.trimmingCharacters(in: ["."])
    } // 4ë‹¨ê³„
   
    if userId.isEmpty {
        userId = "a"
    } // 5ë‹¨ê³„
    
    guard userId.count >= 16 else {
        if userId.count <= 2 {
            while userId.count != 3 {
                userId = "\(userId)\(userId.last!)"// ! : Optional Forced Unwrapping
            } // 7ë‹¨ê³„
        }
        return userId
    }
    userId.removeLast(userId.count - 15)
    
    if userId.last == "."{
        userId.removeLast()
    } // 6ë‹¨ê³„
    
    return userId
}


// 7ë‹¨ê³„(ì‚¬ìš©ëœ swift ë¬¸ë²•)
// "\(??)" : String Interpolation, ë¬¸ìì—´ì— ë³€ìˆ˜ë¥¼ ì‚½ì… ex) let age = 28     print("I'm \(age)") => "I'm 28"

//  guard êµ¬ë¬¸ : if êµ¬ë¬¸ê³¼ ê°™ì´ ì¡°ê±´ë¬¸ìœ¼ë¡œ ìˆœì„œê°€ ifë¬¸ê³¼ ë°˜ëŒ€ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.
//  guard (Bool íƒ€ì… ê°’) else {
//  ì˜ˆì™¸ì‚¬í•­
//  return
//  } --> ì˜ˆì™¸ì‚¬í•­ìœ¼ë¡œ ë¹ ì§€ì§€ ì•Šì•˜ìœ¼ë©´ ë‹¤ìŒì½”ë“œ ì‹¤í–‰
//
//  guard ë¬¸ì„ ì‚¬ìš©í•œ ì´ìœ ëŠ” íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ ifë¬¸ì„ ì‚¬ìš©í•´ë„ ë¬¸ì œëŠ” ì—†ì§€ë§Œ guard ë¬¸ì˜ ì¥ì ì€ íŠ¹ì • ì¡°ê±´ì— ë¶€í•©í•˜ì§€ ì•Šë‹¤ëŠ” íŒë‹¨ì´ ë˜ë©´ ë¹ ë¥¸ ì¢…ë£Œë¥¼ í•  ìˆ˜ ìˆê³  ê°€ë…ì„±ì´ ì¢‹ë‹¤ëŠ” ì ì´ë‹¤(swift ë¬¸ì„œì— ì˜í•˜ë©´)

// !: Optional ê°’ì„ ê°•ì œë¡œ ì–¸ë©í•‘(ì¶”ì¶œ?)í•˜ëŠ” ë°©ë²•ì´ë‹¤. ê·¸ë ‡ê¸°ì— ë§Œì•½ ë³€ìˆ˜ê°€ nil(ë‹¤ë¥¸ ì–¸ì–´ì—ì„œ nul?) ê°’ì´ ì—ˆë‹¤ë©´ ëŸ°íƒ€ì„ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤. ê·¸ë ‡ê¸°ì— ê°€ëŠ¥í•œ ì‚¬ìš©ì„ ì§€ì–‘í•´ì•¼ í•©ë‹ˆë‹¤. --> ifë‚˜ whileë¬¸ì„ ì´ìš©í•œ Optional ë°”ì¸ë”©ì„ í†µí•´ ì–¸ë©í•‘ í•´ì¤ë‹ˆë‹¤. (ì €ëŠ” ì£¼ë¡œ guardë¬¸ì´ë‚˜ ifë¬¸ ì‚¬ìš©)


// í›„ê¸° : Stringì— ëŒ€í•œ ì´í•´ë„ê°€ ìˆìœ¼ë©´ ì‰½ê²Œ í’€ ìˆ˜ ìˆì—ˆë˜ ë¬¸ì œì˜€ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ êµ³ì´ swiftë¡œ ì•Œê³ ë¦¬ì¦˜ì„ í’€ ìƒê°ì´ ì•„ë‹ˆë¼ë©´, êµ³ì´ ì•Œí•„ìš”ê°€ ì—†ë‹¤ ìƒê°í•©ë‹ˆë‹¤.(ë§¤ìš° ì£¼ê´€ì ì¸)

//Best í’€ì´
//2ë‹¨ê³„ì—ì„œ ê³ ì°¨í•¨ìˆ˜ filter ë° isNumber, isLetter ì‚¬ìš©ì‹œ ì½”ë“œëŸ‰ì„ ë‹¨ì¶•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
// => userId.filter{$0.isNumber || $0.isLetter || $0 == "-" || $0 == "_" || $0 == "."}
